<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrissa Data API — Installation Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #4f46e5;
            --accent-hover: #6366f1;
            --border: #3a3a3a;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --card-bg: #1f1f1f;
            --input-bg: #262626;
            --input-border: #404040;
        }
        * { box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--input-border) var(--bg-secondary); }
        *::-webkit-scrollbar { width: 6px; height: 6px; }
        *::-webkit-scrollbar-track { background: var(--bg-secondary); }
        *::-webkit-scrollbar-thumb { background-color: var(--input-border); border-radius: 3px; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            line-height: 1.6;
        }
        a { color: var(--accent); text-decoration: none; }
        a:hover { text-decoration: underline; }
        /* Nav */
        .top-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: rgba(15,15,15,0.92);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 14px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .nav-logo { display: flex; align-items: center; gap: 12px; }
        .nav-logo-circle {
            width: 36px; height: 36px; border-radius: 50%;
            background-color: var(--accent);
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }
        .nav-links { display: flex; gap: 12px; align-items: center; }
        .nav-links a { color: var(--text-secondary); font-size: 0.875rem; font-weight: 500; transition: color 0.15s; }
        .nav-links a:hover { color: var(--text-primary); text-decoration: none; }
        /* Layout */
        .container { max-width: 900px; margin: 0 auto; padding: 0 24px; }
        /* Hero */
        .hero {
            text-align: center;
            padding: 72px 24px 48px;
        }
        .hero h1 { font-size: 2.5rem; font-weight: 800; letter-spacing: -0.03em; margin: 0 0 16px; }
        .hero p { color: var(--text-secondary); font-size: 1.1rem; max-width: 560px; margin: 0 auto; }
        /* Configurator */
        .configurator {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 48px;
        }
        .config-title { font-size: 1rem; font-weight: 700; margin: 0 0 20px; color: var(--text-primary); }
        .config-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        @media (max-width: 700px) { .config-grid { grid-template-columns: 1fr; } }
        @media (max-width: 900px) and (min-width: 701px) { .config-grid { grid-template-columns: 1fr 1fr; } }
        label.field-label { display: block; font-size: 0.78rem; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; }
        input.text-field {
            width: 100%; background-color: var(--input-bg); border: 1px solid var(--input-border);
            border-radius: 9999px; padding: 10px 16px; font-size: 0.875rem; color: var(--text-primary);
            font-family: inherit; outline: none; transition: border-color 0.15s;
        }
        input.text-field:focus { border-color: var(--accent); }
        /* Environment tabs */
        .env-tabs { display: flex; gap: 8px; flex-wrap: wrap; }
        .env-tab {
            padding: 10px 20px; border-radius: 9999px; border: 1px solid var(--border);
            background: transparent; color: var(--text-secondary); font-size: 0.875rem; font-weight: 600;
            cursor: pointer; transition: all 0.2s; font-family: inherit;
        }
        .env-tab:hover { border-color: var(--accent); color: var(--text-primary); }
        .env-tab.active { background-color: var(--accent); border-color: var(--accent); color: #fff; }
        /* Sections */
        .section { margin-bottom: 64px; }
        .section-header { display: flex; align-items: center; gap: 14px; margin-bottom: 28px; }
        .section-icon {
            width: 48px; height: 48px; border-radius: 16px;
            display: flex; align-items: center; justify-content: center; flex-shrink: 0;
        }
        .section-header h2 { font-size: 1.5rem; font-weight: 700; margin: 0 0 4px; }
        .section-header p { font-size: 0.875rem; color: var(--text-secondary); margin: 0; }
        /* Steps */
        .steps { display: flex; flex-direction: column; gap: 20px; }
        .step {
            background-color: var(--card-bg); border: 1px solid var(--border);
            border-radius: 20px; padding: 24px; position: relative;
        }
        .step-num {
            display: inline-flex; align-items: center; justify-content: center;
            width: 28px; height: 28px; border-radius: 50%; background-color: var(--accent);
            color: #fff; font-size: 0.75rem; font-weight: 700; margin-right: 10px;
            flex-shrink: 0;
        }
        .step-title { font-size: 1rem; font-weight: 700; color: var(--text-primary); display: flex; align-items: center; margin-bottom: 12px; }
        .step-body { font-size: 0.875rem; color: var(--text-secondary); }
        .step-body p { margin: 0 0 12px; }
        .step-body p:last-child { margin-bottom: 0; }
        /* Code blocks */
        .code-block {
            position: relative; background-color: #0d0d0d;
            border: 1px solid var(--input-border); border-radius: 14px;
            margin: 12px 0; overflow: hidden;
        }
        .code-block pre {
            margin: 0; padding: 16px 50px 16px 16px;
            font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
            font-size: 0.8rem; color: #e2e8f0; overflow-x: auto; white-space: pre;
        }
        .code-lang {
            position: absolute; top: 10px; left: 14px;
            font-size: 0.65rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase;
            letter-spacing: 0.08em;
        }
        .copy-btn {
            position: absolute; top: 8px; right: 10px;
            background-color: var(--bg-tertiary); border: 1px solid var(--border);
            color: var(--text-secondary); border-radius: 8px; padding: 5px 10px;
            font-size: 0.7rem; cursor: pointer; font-family: inherit; font-weight: 600;
            transition: all 0.15s; display: flex; align-items: center; gap: 4px;
        }
        .copy-btn:hover { background-color: var(--accent); color: #fff; border-color: var(--accent); }
        .copy-btn.copied { background-color: var(--success); color: #fff; border-color: var(--success); }
        /* Info / Warning boxes */
        .callout {
            border-radius: 14px; padding: 14px 16px; margin: 12px 0;
            display: flex; align-items: flex-start; gap: 12px; font-size: 0.85rem;
        }
        .callout-info { background-color: rgba(79,70,229,0.1); border: 1px solid rgba(79,70,229,0.3); color: var(--text-secondary); }
        .callout-warn { background-color: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.35); color: var(--text-secondary); }
        .callout-success { background-color: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); color: var(--text-secondary); }
        .callout-icon { flex-shrink: 0; margin-top: 1px; }
        /* Badge */
        .badge {
            display: inline-flex; align-items: center; gap: 4px;
            padding: 3px 10px; border-radius: 9999px; font-size: 0.7rem; font-weight: 700;
            letter-spacing: 0.04em; text-transform: uppercase;
        }
        .badge-accent { background-color: rgba(79,70,229,0.15); color: var(--accent); border: 1px solid rgba(79,70,229,0.3); }
        .badge-success { background-color: rgba(16,185,129,0.15); color: var(--success); border: 1px solid rgba(16,185,129,0.3); }
        .badge-warn { background-color: rgba(245,158,11,0.12); color: var(--warning); border: 1px solid rgba(245,158,11,0.3); }
        /* Divider */
        .divider { height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); margin: 48px 0; }
        /* TOC sidebar on wide screens */
        .page-layout { display: flex; gap: 40px; align-items: flex-start; }
        .toc {
            width: 220px; flex-shrink: 0; position: sticky; top: 72px;
            background-color: var(--card-bg); border: 1px solid var(--border);
            border-radius: 16px; padding: 20px; font-size: 0.8rem;
        }
        .toc-title { font-weight: 700; color: var(--text-primary); margin-bottom: 12px; font-size: 0.82rem; }
        .toc a { display: block; color: var(--text-secondary); padding: 5px 0; border-bottom: none; transition: color 0.15s; }
        .toc a:hover { color: var(--text-primary); text-decoration: none; }
        .toc a.sub { padding-left: 12px; font-size: 0.75rem; }
        .toc a.active { color: var(--accent); }
        .main-content { flex: 1; min-width: 0; }
        @media (max-width: 768px) { .toc { display: none; } }
        /* Inline code */
        code { background-color: var(--bg-tertiary); padding: 2px 7px; border-radius: 5px; font-size: 0.82em; font-family: monospace; color: #c4b5fd; }
        /* Footer */
        footer { border-top: 1px solid var(--border); padding: 32px 24px; text-align: center; color: var(--text-secondary); font-size: 0.8rem; margin-top: 64px; }
        /* Hidden env panels */
        .env-panel { display: none; }
        .env-panel.active { display: block; }
        /* Highlight */
        .hl-domain { color: #a5f3fc; }
        .hl-ip { color: #fde68a; }
        .hl-user { color: #86efac; }
        /* Guide card */
        .guide-card { background-color: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; padding: 24px; display: flex; align-items: center; gap: 20px; text-decoration: none; transition: border-color 0.2s, transform 0.15s; }
        .guide-card:hover { border-color: var(--accent); transform: translateY(-2px); text-decoration: none; }
        .guide-card-icon { width: 48px; height: 48px; border-radius: 14px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .guide-card-text h3 { font-size: 1rem; font-weight: 700; color: var(--text-primary); margin: 0 0 4px; }
        .guide-card-text p { font-size: 0.82rem; color: var(--text-secondary); margin: 0; }
    </style>
</head>
<body>

<!-- Top Nav -->
<nav class="top-nav">
    <div class="nav-logo">
        <div class="nav-logo-circle">
            <svg style="width:20px;height:20px;fill:#fff;" viewBox="0 0 7000 7000" xmlns="http://www.w3.org/2000/svg"><g><path d="M3534.57 2921.26l509.33 278.51 0 600.85 -543.85 297.38 -543.84 -297.38 0 -600.85 543.84 -297.38 34.51 18.87zm166.69 255.62l-201.2 -110.02 -399.01 218.18 0 430.3 399.01 218.19 399.01 -218.19 0 -430.3 -197.81 -108.16z"/><path d="M3206.76 1423.91l672.75 0 0 1366.1 -745.17 0 0 -1366.1 72.42 0zm527.92 144.83l-455.5 0 0 1076.43 455.5 0 0 -1076.43z"/><polygon points="3436.12,1496.03 3436.12,899.79 3580.96,899.79 3580.96,1496.03"/><polygon points="3432.32,3004.16 3432.32,2675.89 3577.15,2675.89 3577.15,3004.16"/><path d="M3203.34 5576.08l672.75 0 0 -1366.09 -745.17 0 0 1366.09 72.42 0zm527.92 -144.83l-455.5 0 0 -1076.43 455.5 0 0 -1076.43z"/><polygon points="3432.7,5503.96 3432.7,6100.2 3577.53,6100.2 3577.53,5503.96"/><polygon points="3428.89,3986.69 3428.89,4314.95 3573.73,4314.95 3573.73,3986.69"/><path d="M5172.55 4811.44l336.37 -582.62 -1183.07 -683.05 -372.59 645.33 1183.07 683.05 36.21 -62.72zm138.53 -529.61l-227.75 394.48 -932.21 -538.21 227.75 -394.48 932.21 538.21z"/><polygon points="5224.77,4576.75 5741.13,4874.87 5813.54,4749.44 5297.19,4451.32"/><polygon points="3908.87,3821.41 4193.16,3985.54 4265.57,3860.11 3981.29,3695.98"/><path d="M5479.29 2714.84l-336.37 -582.62 -1183.07 683.05 372.58 645.33 1183.07 -683.05 -36.21 -62.71zm-389.39 -384.77l227.75 394.47 -932.21 538.21 -227.75 -394.47 932.21 -538.21z"/><polygon points="5302.15,2552.27 5818.51,2254.15 5746.09,2128.72 5229.73,2426.84"/><polygon points="3990.05,3314.2 4274.34,3150.07 4201.92,3024.64 3917.63,3188.77"/><path d="M1829.86 4820.48l-336.38 -582.62 1183.07 -683.05 372.59 645.33 -1183.07 683.05 -36.21 -62.72zm-138.53 -529.61l227.75 394.47 932.21 -538.21 -227.75 -394.47 -932.21 538.21z"/><polygon points="1777.64,4585.79 1261.28,4883.91 1188.87,4758.48 1705.22,4460.36"/><polygon points="3093.54,3830.44 2809.25,3994.57 2736.83,3869.15 3021.12,3705.01"/><path d="M1520.7 2723.73l336.38 -582.62 1183.07 683.05 -372.58 645.33 -1183.07 -683.05 36.21 -62.72zm389.39 -384.77l-227.75 394.47 932.21 538.22 227.75 -394.48 -932.21 -538.21z"/><polygon points="1697.84,2561.16 1181.48,2263.04 1253.9,2137.61 1770.26,2435.73"/><polygon points="3009.94,3323.09 2725.65,3158.96 2798.07,3033.53 3082.35,3197.66"/></g></svg>
        </div>
        <span style="font-weight:700;font-size:1rem;">Arrissa Data API</span>
        <span class="badge badge-accent" style="margin-left:4px;">Install Guide</span>
    </div>
    <div class="nav-links">
        <a href="#configure">Configure</a>
        <a href="#ea-setup">EA Setup</a>
        <a href="#updating">Updates</a>
        <a href="/get/n8n-install.html"" style="display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:9999px;padding:6px 14px;color:var(--text-secondary);font-size:0.8rem;font-weight:600;transition:all 0.15s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--text-primary)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-secondary)'">
            <i data-feather="zap" style="width:13px;height:13px;"></i> n8n Guide
        </a>
        <a href="/get/brokers.html"" style="display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:9999px;padding:6px 14px;color:var(--text-secondary);font-size:0.8rem;font-weight:600;transition:all 0.15s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--text-primary)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-secondary)'">
            <i data-feather="trending-up" style="width:13px;height:13px;"></i> Brokers
        </a>
        <a href="/get/vps-providers.html"" style="display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:9999px;padding:6px 14px;color:var(--text-secondary);font-size:0.8rem;font-weight:600;transition:all 0.15s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--text-primary)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-secondary)'">
            <i data-feather="cloud" style="width:13px;height:13px;"></i> VPS
        </a>
    </div>
</nav>

<!-- Hero -->
<div class="hero container">
    <h1>Installation Guide</h1>
    <p>Complete setup instructions for Ubuntu + Caddy, Windows VPS + XAMPP, and Windows localhost + WAMP. Includes EA configuration and update workflow.</p>
</div>

<div class="container">

    <!-- Configurator -->
    <div class="configurator" id="configure">
        <p class="config-title"><i data-feather="settings" style="width:16px;height:16px;display:inline;vertical-align:-3px;margin-right:6px;color:var(--accent);"></i>Quick Configurator — enter your details to get personalised commands</p>
        <div class="config-grid">
            <div>
                <label class="field-label" for="domainInput">Your Domain / Hostname</label>
                <input class="text-field" type="text" id="domainInput" placeholder="e.g. arrissadata.com" oninput="updateAll()">
            </div>
            <div>
                <label class="field-label" for="ipInput">Your Server IP Address</label>
                <input class="text-field" type="text" id="ipInput" placeholder="e.g. 192.168.1.100" oninput="updateAll()">
            </div>
            <div>
                <label class="field-label" for="userInput">VPS Username <span style="font-weight:400;color:var(--text-secondary);text-transform:none;letter-spacing:0;">(Ubuntu only)</span></label>
                <input class="text-field" type="text" id="userInput" placeholder="e.g. ubuntu" oninput="updateAll()">
            </div>
        </div>
        <label class="field-label">Choose Your Environment</label>
        <div class="env-tabs">
            <button class="env-tab active" onclick="switchEnv('ubuntu')">
                <i data-feather="server" style="width:14px;height:14px;display:inline;vertical-align:-2px;margin-right:6px;"></i>Ubuntu + Caddy
            </button>
            <button class="env-tab" onclick="switchEnv('xampp')">
                <i data-feather="monitor" style="width:14px;height:14px;display:inline;vertical-align:-2px;margin-right:6px;"></i>Windows VPS + XAMPP
            </button>
            <button class="env-tab" onclick="switchEnv('wamp')">
                <i data-feather="home" style="width:14px;height:14px;display:inline;vertical-align:-2px;margin-right:6px;"></i>Windows Localhost + WAMP
            </button>
        </div>
    </div>

    <!-- Page layout with TOC -->
    <div class="page-layout">
        <aside class="toc">
            <div class="toc-title">On This Page</div>
            <a href="#prerequisites">Prerequisites</a>
            <a href="#installation">Installation</a>
            <a href="#webserver">Web Server Setup</a>
            <a href="#db-init">Database Init</a>
            <a href="#permissions">Permissions</a>
            <a href="#first-login">First Login</a>
            <a href="#ea-setup">EA Setup</a>
            <a href="#mt5-config">MT5 Configuration</a>
            <a href="#updating">Updating</a>
            <a href="#troubleshooting">Troubleshooting</a>
            <a href="#related">Related Guides</a>
        </aside>

        <div class="main-content">

<!-- ═══════════════════════════════════════════════════ UBUNTU + CADDY -->
<div class="env-panel active" id="panel-ubuntu">

    <div class="section" id="prerequisites">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#4f46e5,#6366f1);">
                <i data-feather="check-square" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Prerequisites <span class="badge badge-accent">Ubuntu + Caddy</span></h2>
                <p>What you need before starting</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Requirements</div>
                <div class="step-body">
                    <p>You will need:</p>
                    <ul style="margin:0 0 12px 16px;padding:0;list-style:disc;color:var(--text-secondary);font-size:0.875rem;">
                        <li>Ubuntu 22.04 LTS or 24.04 (fresh VPS or dedicated server)</li>
                        <li>A domain name with an A record pointing to your server IP</li>
                        <li>Root or sudo access</li>
                        <li>Port 80 and 443 open in your firewall</li>
                    </ul>
                    <p>Update your DNS: Add an <strong style="color:var(--text-primary);">A record</strong> for <code class="hl-domain" id="u-domain-dns">yourdomain.com</code> pointing to <code class="hl-ip" id="u-ip-dns">YOUR_SERVER_IP</code>.</p>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>SSH into your server</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre id="u-ssh-cmd">ssh ubuntu@YOUR_SERVER_IP</pre>
                    </div>
                    <p>All commands below are run on the server after connecting.</p>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">3</span>Update system &amp; install dependencies</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo apt update && sudo apt upgrade -y
sudo apt install -y git curl unzip php8.2 php8.2-cli php8.2-sqlite3 php8.2-mbstring php8.2-xml php8.2-curl libapache2-mod-php8.2</pre>
                    </div>
                    <div class="callout callout-info">
                        <i data-feather="info" class="callout-icon" style="width:16px;height:16px;color:var(--accent);"></i>
                        <span>We use Apache with Caddy as a reverse proxy. Caddy handles SSL/TLS automatically.</span>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">3</span>Install Apache &amp; Caddy</div>
                <div class="step-body">
                    <p>Install Apache (PHP runs through it), then install Caddy as the front-facing reverse proxy:</p>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo apt install -y apache2
sudo a2enmod rewrite
sudo systemctl enable apache2

# Install Caddy
sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https curl
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
sudo apt update
sudo apt install -y caddy</pre>
                    </div>
                    <p>Make Apache listen on port <code>8080</code> (Caddy will sit on 80/443):</p>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo sed -i 's/^Listen 80$/Listen 8080/' /etc/apache2/ports.conf
sudo sed -i 's/\*:80/\*:8080/g' /etc/apache2/sites-enabled/000-default.conf
sudo systemctl restart apache2</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="installation">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#10b981,#059669);">
                <i data-feather="download" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Clone &amp; Install</h2>
                <p>Get the app onto your server</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Clone the repository</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo mkdir -p /var/www/arrissa
sudo chown $USER:$USER /var/www/arrissa
git clone https://github.com/vestorfinance/arrissa-data-api-integrated.git /var/www/arrissa
cd /var/www/arrissa</pre>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Set permissions</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo chown -R www-data:www-data /var/www/arrissa
sudo find /var/www/arrissa -type d -exec chmod 755 {} \;
sudo find /var/www/arrissa -type f -exec chmod 644 {} \;
sudo chmod -R 775 /var/www/arrissa/database
sudo chmod -R 775 /var/www/arrissa/market-data-api-v1/queue
sudo chmod -R 775 /var/www/arrissa/orders-api-v1/queue
sudo chmod -R 775 /var/www/arrissa/tma-cg-api-v1/queue
sudo chmod -R 775 /var/www/arrissa/quarters-theory-api-v1/queue
sudo chmod -R 775 /var/www/arrissa/symbol-info-api-v1/queue</pre>
                    </div>
                </div>
            </div>
            <div class="step" id="db-init">
                <div class="step-title"><span class="step-num">3</span>Initialise the database</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo -u www-data php /var/www/arrissa/database/init.php</pre>
                    </div>
                    <div class="callout callout-success">
                        <i data-feather="check-circle" class="callout-icon" style="width:16px;height:16px;color:var(--success);"></i>
                        <span>This creates the SQLite database and seeds default credentials: <strong style="color:var(--text-primary);">admin</strong> / <strong style="color:var(--text-primary);">password</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="webserver">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#0ea5e9,#6366f1);">
                <i data-feather="globe" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Configure Apache &amp; Caddy</h2>
                <p>Virtual host + reverse proxy + automatic HTTPS</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Create Apache virtual host</div>
                <div class="step-body">
                    <p>This command creates the config file without needing an editor:</p>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre id="u-apache-vhost">sudo tee /etc/apache2/sites-available/arrissa.conf &lt;&lt;'EOF'
&lt;VirtualHost *:8080&gt;
    ServerName yourdomain.com
    DocumentRoot /var/www/arrissa

    &lt;Directory /var/www/arrissa&gt;
        AllowOverride All
        Require all granted
        Options -Indexes
    &lt;/Directory&gt;

    ErrorLog ${APACHE_LOG_DIR}/arrissa-error.log
    CustomLog ${APACHE_LOG_DIR}/arrissa-access.log combined
&lt;/VirtualHost&gt;
EOF</pre>
                    </div>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo a2dissite 000-default.conf
sudo a2ensite arrissa.conf
sudo systemctl reload apache2</pre>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Configure Caddy (auto HTTPS)</div>
                <div class="step-body">
                    <p>Caddy automatically obtains and renews Let's Encrypt certificates for <code class="hl-domain" id="u-domain-caddy">yourdomain.com</code>:</p>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre id="u-caddy-conf">sudo tee /etc/caddy/Caddyfile &lt;&lt;'EOF'
yourdomain.com {
    reverse_proxy localhost:8080
    encode gzip
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "SAMEORIGIN"
    }
}
EOF</pre>
                    </div>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo systemctl enable caddy
sudo systemctl restart caddy</pre>
                    </div>
                    <div class="callout callout-warn">
                        <i data-feather="alert-triangle" class="callout-icon" style="width:16px;height:16px;color:var(--warning);"></i>
                        <span>Make sure your domain's DNS A record already points to your server IP before restarting Caddy, otherwise the SSL certificate request will fail.</span>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">3</span>Configure update script permissions</div>
                <div class="step-body">
                    <p>The web app can pull updates from git via the UI. Allow <code>www-data</code> to run the update script without a password:</p>
                    <div class="code-block">
                        <span class="code-lang">bash</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>sudo chmod +x /var/www/arrissa/update.sh
echo "www-data ALL=(ALL) NOPASSWD: /var/www/arrissa/update.sh" | sudo tee /etc/sudoers.d/arrissa-update
sudo chmod 440 /etc/sudoers.d/arrissa-update</pre>
                    </div>
                </div>
            </div>
            <div class="step" id="first-login">
                <div class="step-title"><span class="step-num">4</span>First login &amp; base URL</div>
                <div class="step-body">
                    <p>Open <code class="hl-domain"><span id="u-domain-url">https://yourdomain.com</span></code> in your browser.</p>
                    <p>Login: <code>admin</code> / <code>password</code> — <strong style="color:var(--warning);">change this immediately in Settings.</strong></p>
                    <p>Go to <strong>Settings → App Base URL</strong> and set it to <code class="hl-domain" id="u-base-url">https://yourdomain.com</code></p>
                </div>
            </div>
        </div>
    </div>

</div><!-- /panel-ubuntu -->

<!-- ═══════════════════════════════════════════════════ WINDOWS XAMPP -->
<div class="env-panel" id="panel-xampp">

    <div class="section" id="prerequisites">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#f59e0b,#ef4444);">
                <i data-feather="monitor" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Prerequisites <span class="badge badge-warn">Windows VPS + XAMPP</span></h2>
                <p>Requirements for a Windows Server or VPS</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Download &amp; install XAMPP</div>
                <div class="step-body">
                    <p>Download XAMPP with PHP 8.2 from <a href="https://www.apachefriends.org/" target="_blank">apachefriends.org</a>. Install to <code>C:\xampp\</code>.</p>
                    <p>During installation, select: <strong>Apache</strong>, <strong>PHP</strong>. MySQL/MariaDB is not needed.</p>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Install Git for Windows</div>
                <div class="step-body">
                    <p>Download from <a href="https://git-scm.com/download/win" target="_blank">git-scm.com</a> and install with default settings.</p>
                    <p>Open <strong>Commander</strong> (PowerShell) as Administrator for all commands below.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="installation">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#10b981,#059669);">
                <i data-feather="download" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Clone &amp; Install</h2>
                <p>Get the app into your XAMPP web root</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Clone the repository</div>
                <div class="step-body">
                    <p>Run in PowerShell (as Administrator):</p>
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>cd C:\xampp\htdocs
git clone https://github.com/vestorfinance/arrissa-data-api-integrated.git arrissa
cd arrissa</pre>
                    </div>
                </div>
            </div>
            <div class="step" id="db-init">
                <div class="step-title"><span class="step-num">2</span>Initialise the database</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>C:\xampp\php\php.exe C:\xampp\htdocs\arrissa\database\init.php</pre>
                    </div>
                    <div class="callout callout-success">
                        <i data-feather="check-circle" class="callout-icon" style="width:16px;height:16px;color:var(--success);"></i>
                        <span>Default credentials: <strong style="color:var(--text-primary);">admin</strong> / <strong style="color:var(--text-primary);">password</strong> — change after first login.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="webserver">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#0ea5e9,#6366f1);">
                <i data-feather="globe" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Configure Apache Virtual Host</h2>
                <p>Map your VPS IP / domain to the app</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Create the virtual host config</div>
                <div class="step-body">
                    <p>This PowerShell command writes the config file for you — no editor needed:</p>
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre id="x-vhost">@"
&lt;VirtualHost *:80&gt;
    ServerName yourdomain.com
    DocumentRoot "C:/xampp/htdocs/arrissa"
    &lt;Directory "C:/xampp/htdocs/arrissa"&gt;
        AllowOverride All
        Require all granted
        Options -Indexes
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
"@ | Out-File -FilePath "C:\xampp\apache\conf\extra\httpd-vhosts.conf" -Encoding ASCII -Append</pre>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Enable vhosts &amp; mod_rewrite in Apache</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>(Get-Content "C:\xampp\apache\conf\httpd.conf") `
  -replace '#Include conf/extra/httpd-vhosts.conf','Include conf/extra/httpd-vhosts.conf' `
  -replace '#LoadModule rewrite_module','LoadModule rewrite_module' |
  Set-Content "C:\xampp\apache\conf\httpd.conf"</pre>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">3</span>Allow port 80 through Windows Firewall</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>New-NetFirewallRule -DisplayName "Apache HTTP" -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow
New-NetFirewallRule -DisplayName "Apache HTTPS" -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow</pre>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">4</span>Start Apache &amp; set as Windows service</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>C:\xampp\apache\bin\httpd.exe -k install
Start-Service Apache2.4</pre>
                    </div>
                </div>
            </div>
            <div class="step" id="first-login">
                <div class="step-title"><span class="step-num">5</span>First login &amp; base URL</div>
                <div class="step-body">
                    <p>Open <code class="hl-domain"><span id="x-domain-url">http://yourdomain.com</span></code> (or <code class="hl-ip"><span id="x-ip-url">http://YOUR_SERVER_IP</span></code>) in your browser.</p>
                    <p>Login: <code>admin</code> / <code>password</code> — <strong style="color:var(--warning);">change this immediately.</strong></p>
                    <p>Go to <strong>Settings → App Base URL</strong> and set to <code class="hl-domain" id="x-base-url">http://yourdomain.com</code></p>
                </div>
            </div>
        </div>
    </div>

</div><!-- /panel-xampp -->

<!-- ═══════════════════════════════════════════════════ WINDOWS WAMP -->
<div class="env-panel" id="panel-wamp">

    <div class="section" id="prerequisites">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#8b5cf6,#6366f1);">
                <i data-feather="home" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Prerequisites <span class="badge badge-accent">Windows Localhost + WAMP</span></h2>
                <p>For local development on your Windows PC</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Download &amp; install WAMP64</div>
                <div class="step-body">
                    <p>Download WAMP64 from <a href="https://www.wampserver.com/" target="_blank">wampserver.com</a>. Install to default path <code>C:\wamp64\</code>.</p>
                    <p>The web root will be <code>C:\wamp64\www\</code>.</p>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Install Git for Windows</div>
                <div class="step-body">
                    <p>Download from <a href="https://git-scm.com/download/win" target="_blank">git-scm.com</a>. Use default settings. Open PowerShell for all commands below.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="installation">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#10b981,#059669);">
                <i data-feather="download" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Clone &amp; Install</h2>
                <p>Get the app into your WAMP web root</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Clone the repository</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>cd C:\wamp64\www
git clone https://github.com/vestorfinance/arrissa-data-api-integrated.git .
# Note the dot (.) — clones directly into www\ not a subfolder</pre>
                    </div>
                    <div class="callout callout-warn">
                        <i data-feather="alert-triangle" class="callout-icon" style="width:16px;height:16px;color:var(--warning);"></i>
                        <span>If <code>www\</code> already has files, clone to a subfolder: <code>git clone ... arrissa</code> then access via <code>http://localhost/arrissa</code></span>
                    </div>
                </div>
            </div>
            <div class="step" id="db-init">
                <div class="step-title"><span class="step-num">2</span>Initialise the database</div>
                <div class="step-body">
                    <p>Start WAMP first (click the WAMP tray icon → Start All Services), then run:</p>
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>C:\wamp64\bin\php\php8.2.x\php.exe C:\wamp64\www\database\init.php
# Replace php8.2.x with your actual PHP version folder name</pre>
                    </div>
                    <div class="callout callout-success">
                        <i data-feather="check-circle" class="callout-icon" style="width:16px;height:16px;color:var(--success);"></i>
                        <span>Default credentials: <strong style="color:var(--text-primary);">admin</strong> / <strong style="color:var(--text-primary);">password</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="section" id="webserver">
        <div class="section-header">
            <div class="section-icon" style="background:linear-gradient(135deg,#0ea5e9,#6366f1);">
                <i data-feather="globe" style="width:22px;height:22px;color:#fff;"></i>
            </div>
            <div>
                <h2>Configure VirtualHost for Clean URLs</h2>
                <p>Access the app at http://localhost instead of a subfolder</p>
            </div>
        </div>
        <div class="steps">
            <div class="step">
                <div class="step-title"><span class="step-num">1</span>Enable mod_rewrite in WAMP Apache</div>
                <div class="step-body">
                    <p>Left-click the WAMP icon in your system tray → Apache → Apache Modules → Find and enable <strong>rewrite_module</strong>. Apache will restart automatically.</p>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">2</span>Enable vhosts include</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>$httpd = Get-Content "C:\wamp64\bin\apache\apache2.4.x\conf\httpd.conf" -Raw
$httpd = $httpd -replace '# Virtual hosts\r?\n#Include conf/extra/httpd-vhosts.conf','# Virtual hosts`nInclude conf/extra/httpd-vhosts.conf'
$httpd | Set-Content "C:\wamp64\bin\apache\apache2.4.x\conf\httpd.conf"</pre>
                    </div>
                    <div class="callout callout-info">
                        <i data-feather="info" class="callout-icon" style="width:16px;height:16px;color:var(--accent);"></i>
                        <span>Replace <code>apache2.4.x</code> with your actual Apache version folder (check <code>C:\wamp64\bin\apache\</code>).</span>
                    </div>
                </div>
            </div>
            <div class="step">
                <div class="step-title"><span class="step-num">3</span>Write virtual host config</div>
                <div class="step-body">
                    <div class="code-block">
                        <span class="code-lang">powershell</span>
                        <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                        <pre>@"
&lt;VirtualHost *:80&gt;
    ServerName localhost
    DocumentRoot "C:/wamp64/www"
    &lt;Directory "C:/wamp64/www"&gt;
        AllowOverride All
        Require all granted
        Options -Indexes
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
"@ | Out-File -FilePath "C:\wamp64\bin\apache\apache2.4.x\conf\extra\httpd-vhosts.conf" -Encoding ASCII</pre>
                    </div>
                    <p>Restart WAMP (tray icon → Restart All Services).</p>
                </div>
            </div>
            <div class="step" id="first-login">
                <div class="step-title"><span class="step-num">4</span>First login</div>
                <div class="step-body">
                    <p>Open <code>http://localhost</code> in your browser.</p>
                    <p>Login: <code>admin</code> / <code>password</code> — <strong style="color:var(--warning);">change this in Settings.</strong></p>
                    <p>Go to <strong>Settings → App Base URL</strong> and leave it as <code>http://127.0.0.1</code> or <code>http://localhost</code>.</p>
                </div>
            </div>
        </div>
    </div>

</div><!-- /panel-wamp -->

<!-- ═══════════════════════════════════════════════════ EA SETUP (COMMON) -->
<div class="divider"></div>

<div class="section" id="ea-setup">
    <div class="section-header">
        <div class="section-icon" style="background:linear-gradient(135deg,#f59e0b,#ef4444);">
            <i data-feather="cpu" style="width:22px;height:22px;color:#fff;"></i>
        </div>
        <div>
            <h2>Expert Advisor Setup in MT5</h2>
            <p>Applies to all installation environments</p>
        </div>
    </div>
    <div class="steps">
        <div class="step">
            <div class="step-title"><span class="step-num">1</span>Download EA files from the app</div>
            <div class="step-body">
                <p>Log into the app and go to <strong>Download EAs</strong> in the sidebar. Download the following:</p>
                <ul style="margin:8px 0 0 16px;padding:0;list-style:disc;color:var(--text-secondary);font-size:0.875rem;line-height:2;">
                    <li><strong style="color:var(--text-primary);">Arrissa Data MT5 Market Data API.ex5</strong> → <code>MQL5/Experts/</code></li>
                    <li><strong style="color:var(--text-primary);">Arrissa Data MT5 Orders API.ex5</strong> → <code>MQL5/Experts/</code></li>
                    <li><strong style="color:var(--text-primary);">Arrissa Data Symbol Info API.ex5</strong> → <code>MQL5/Experts/</code></li>
                    <li><strong style="color:var(--text-primary);">Richchild Quarters Theory Data EA V2.ex5</strong> → <code>MQL5/Experts/</code></li>
                    <li><strong style="color:var(--text-primary);">TMA CG Data EA.ex5</strong> → <code>MQL5/Experts/</code></li>
                    <li><strong style="color:var(--text-primary);">TMA + CG.ex5</strong> → <code>MQL5/Indicators/</code> (indicator, not Experts!)</li>
                </ul>
                <div class="callout callout-info" style="margin-top:12px;">
                    <i data-feather="info" class="callout-icon" style="width:16px;height:16px;color:var(--accent);"></i>
                    <span>Find your MT5 data folder: In MT5 go to <strong>File → Open Data Folder</strong>. Then navigate to the <code>MQL5/</code> directory.</span>
                </div>
            </div>
        </div>
        <div class="step" id="mt5-config">
            <div class="step-title"><span class="step-num">2</span>Allow the app URL in MT5</div>
            <div class="step-body">
                <p>In MT5: <strong>Tools → Options → Expert Advisors tab</strong></p>
                <p>Check <strong>"Allow WebRequest for listed URL"</strong> and add your Base URL:</p>
                <ul style="margin:8px 0 12px 16px;padding:0;list-style:disc;color:var(--text-secondary);font-size:0.875rem;">
                    <li><strong>Local install:</strong> add <code>http://127.0.0.1</code></li>
                    <li><strong>Remote/VPS:</strong> add <code class="hl-domain" id="ea-domain-url">https://yourdomain.com</code></li>
                </ul>
                <div class="callout callout-warn">
                    <i data-feather="alert-triangle" class="callout-icon" style="width:16px;height:16px;color:var(--warning);"></i>
                    <span>Without this step, all WebRequest calls from the EAs will silently fail with error 4014.</span>
                </div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">3</span>Enable AutoTrading</div>
            <div class="step-body">
                <p>Click the <strong>AutoTrading</strong> button in the MT5 toolbar (it turns green when active). The EAs will not send/receive data without this enabled.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">4</span>Attach an EA to a chart &amp; set Base URL</div>
            <div class="step-body">
                <p>In the MT5 Navigator panel, drag any EA onto a chart. In the EA settings dialog that opens:</p>
                <ul style="margin:8px 0 12px 16px;padding:0;list-style:disc;color:var(--text-secondary);font-size:0.875rem;">
                    <li>Find <strong>Base URL</strong> input</li>
                    <li><strong>Local install:</strong> leave as <code>http://127.0.0.1</code> (default)</li>
                    <li><strong>Remote install:</strong> enter <code class="hl-domain" id="ea-base-url">https://yourdomain.com</code></li>
                </ul>
                <div class="callout callout-success">
                    <i data-feather="check-circle" class="callout-icon" style="width:16px;height:16px;color:var(--success);"></i>
                    <span>The Base URL in the EA must match the Base URL set in the app's Settings page exactly.</span>
                </div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">5</span>TMA CG Data EA — extra step</div>
            <div class="step-body">
                <p>The TMA CG Data EA requires the <strong>TMA + CG indicator</strong> installed in <code>MQL5/Indicators/</code>. The EA loads it automatically in the background — you do <em>not</em> need to add it to a chart manually. Just make sure the .ex5 file is in the Indicators folder and MT5 has been restarted / refreshed.</p>
            </div>
        </div>
    </div>
</div>

<!-- ═══════════════════════════════════════════════════ UPDATING -->
<div class="divider"></div>

<div class="section" id="updating">
    <div class="section-header">
        <div class="section-icon" style="background:linear-gradient(135deg,#10b981,#4f46e5);">
            <i data-feather="refresh-cw" style="width:22px;height:22px;color:#fff;"></i>
        </div>
        <div>
            <h2>Updating the App</h2>
            <p>Keep Arrissa Data API up to date</p>
        </div>
    </div>
    <div class="steps">
        <div class="step">
            <div class="step-title"><span class="step-num">1</span>Via the UI (recommended)</div>
            <div class="step-body">
                <p>When a new version is available, a notification banner will automatically appear at the top of the app. Click <strong>Pull Update</strong> — the app will pull the latest code and reload.</p>
                <p>Alternatively: go to <strong>Settings → App Updates → Pull Updates</strong> at any time.</p>
                <div class="callout callout-info">
                    <i data-feather="info" class="callout-icon" style="width:16px;height:16px;color:var(--accent);"></i>
                    <span>The app checks for updates on every page load and every 5 minutes automatically.</span>
                </div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">2</span>Via command line — Ubuntu</div>
            <div class="step-body">
                <div class="code-block">
                    <span class="code-lang">bash</span>
                    <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                    <pre>cd /var/www/arrissa
sudo -u www-data git pull origin main</pre>
                </div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">3</span>Via command line — Windows</div>
            <div class="step-body">
                <div class="code-block">
                    <span class="code-lang">powershell</span>
                    <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                    <pre># WAMP
cd C:\wamp64\www; git pull origin main

# XAMPP
cd C:\xampp\htdocs\arrissa; git pull origin main</pre>
                </div>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">4</span>After updating — re-download EAs</div>
            <div class="step-body">
                <p>If an update includes changes to Expert Advisor files, re-download the updated .ex5 files from the <strong>Download EAs</strong> page and replace the old ones in MT5's <code>MQL5/Experts/</code> folder. Restart MT5 or reload the Expert from the Navigator.</p>
            </div>
        </div>
    </div>
</div>

<!-- ═══════════════════════════════════════════════════ TROUBLESHOOTING -->
<div class="divider"></div>

<div class="section" id="troubleshooting">
    <div class="section-header">
        <div class="section-icon" style="background:linear-gradient(135deg,#ef4444,#f59e0b);">
            <i data-feather="alert-triangle" style="width:22px;height:22px;color:#fff;"></i>
        </div>
        <div>
            <h2>Troubleshooting</h2>
            <p>Common issues and how to fix them</p>
        </div>
    </div>
    <div class="steps">
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>EA shows "Error 4014 — WebRequest not allowed"</div>
            <div class="step-body">
                <p>You haven't added the Base URL to MT5's allowed URLs. Go to <strong>Tools → Options → Expert Advisors</strong>, enable WebRequest, and add your URL. See <a href="#mt5-config">Step 2 of EA Setup</a>.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>Blank page or 500 error after cloning</div>
            <div class="step-body">
                <p>The database hasn't been initialised. Run the <code>database/init.php</code> command for your environment shown in the Installation section above.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>TMA CG EA loads but no data</div>
            <div class="step-body">
                <p>Ensure <code>TMA + CG.ex5</code> is in <code>MQL5/Indicators/</code> (not Experts). Refresh MT5 Navigator (right-click → Refresh) and restart the EA.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>Caddy fails to get SSL certificate</div>
            <div class="step-body">
                <p>Check that your domain's A record correctly points to your server IP. DNS propagation can take up to 24 hours. Check with: </p>
                <div class="code-block">
                    <span class="code-lang">bash</span>
                    <button class="copy-btn" onclick="copyCode(this)"><i data-feather="copy" style="width:11px;height:11px;"></i> Copy</button>
                    <pre id="u-dig-check">dig +short yourdomain.com A
# Should return your server IP</pre>
                </div>
                <p>Also check Caddy logs: <code>sudo journalctl -u caddy --no-pager -n 50</code></p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>Update fails with "permission denied"</div>
            <div class="step-body">
                <p><strong>Ubuntu:</strong> Ensure the sudoers entry was created correctly (Step 3 of Web Server Setup). Run <code>sudo visudo -c</code> to validate.</p>
                <p><strong>Windows:</strong> Run PowerShell as Administrator when pulling manually.</p>
            </div>
        </div>
        <div class="step">
            <div class="step-title"><span class="step-num">!</span>Login says "invalid credentials" after fresh install</div>
            <div class="step-body">
                <p>The database init hasn't run, or it ran with an error. Re-run the init command for your environment. Default credentials are: <code>admin</code> / <code>password</code>.</p>
            </div>
        </div>
    </div>
</div>

        </div><!-- /main-content -->
    </div><!-- /page-layout -->

    <!-- Related Guides -->
    <div class="divider"></div>
    <div style="margin-bottom:64px;" id="related">
        <h2 style="font-size:1.3rem;font-weight:700;margin:0 0 20px;">Related Guides</h2>
        <a href="/get/n8n-install.html"" class="guide-card">
            <div class="guide-card-icon" style="background:linear-gradient(135deg,#ea4b71,#ff6d5a);">
                <span style="font-size:1rem;font-weight:900;color:#fff;letter-spacing:-0.04em;">n8n</span>
            </div>
            <div class="guide-card-text">
                <h3>n8n &mdash; Installation Guide</h3>
                <p>Install n8n workflow automation on Ubuntu + Caddy, Windows + Docker, or macOS + Docker.</p>
            </div>
            <i data-feather="arrow-right" style="width:18px;height:18px;color:var(--text-secondary);margin-left:auto;flex-shrink:0;"></i>
        </a>
        <a href="/get/brokers.html"" class="guide-card">
            <div class="guide-card-icon" style="background:linear-gradient(135deg,#10b981,#059669);">
                <i data-feather="trending-up" style="width:20px;height:20px;color:#fff;"></i>
            </div>
            <div class="guide-card-text">
                <h3>Recommended Brokers</h3>
                <p>6 partner brokers trusted for trading with Arrissa Data APIs and MetaTrader 5.</p>
            </div>
            <i data-feather="arrow-right" style="width:18px;height:18px;color:var(--text-secondary);margin-left:auto;flex-shrink:0;"></i>
        </a>
        <a href="/get/vps-providers.html"" class="guide-card">
            <div class="guide-card-icon" style="background:linear-gradient(135deg,#0ea5e9,#4f46e5);">
                <i data-feather="cloud" style="width:20px;height:20px;color:#fff;"></i>
            </div>
            <div class="guide-card-text">
                <h3>VPS Providers</h3>
                <p>Recommended hosting to run your API server 24/7 including Cloud.co.za.</p>
            </div>
            <i data-feather="arrow-right" style="width:18px;height:18px;color:var(--text-secondary);margin-left:auto;flex-shrink:0;"></i>
        </a>
    </div>

</div><!-- /container -->

<footer>
    <p>Arrissa Data API — <a href="https://arrissa.trade" target="_blank">arrissa.trade</a> · Self-hosted market data suite for MetaTrader 5</p>
</footer>

<script>
feather.replace();

// ── Dynamic domain/IP substitution ─────────────────────────────────
function getDomain() {
    const d = document.getElementById('domainInput').value.trim();
    return d || 'yourdomain.com';
}
function getIP() {
    const ip = document.getElementById('ipInput').value.trim();
    return ip || 'YOUR_SERVER_IP';
}
function currentEnv() {
    return document.querySelector('.env-tab.active')?.getAttribute('data-env') || 'ubuntu';
}

function getUser() {
    const u = document.getElementById('userInput');
    return u ? (u.value.trim() || 'ubuntu') : 'ubuntu';
}

function updateAll() {
    const domain = getDomain();
    const ip     = getIP();
    const user   = getUser();
    const isHttps = document.getElementById('panel-ubuntu').classList.contains('active');
    const proto   = isHttps ? 'https' : 'http';

    // Ubuntu texts
    setText('u-domain-dns', domain);
    setText('u-ip-dns', ip);
    setCode('u-ssh-cmd', () => `ssh ${user}@${ip}`);
    setCode('u-apache-vhost', el => el.textContent.replace(/yourdomain\.com/g, domain));
    setCode('u-caddy-conf',   el => el.textContent.replace(/yourdomain\.com/g, domain));
    setText('u-domain-caddy', domain);
    setText('u-domain-url', `https://${domain}`);
    setText('u-base-url', `https://${domain}`);
    setCode('u-dig-check', el => el.textContent.replace(/yourdomain\.com/g, domain));

    // XAMPP texts
    setCode('x-vhost', el => el.textContent.replace(/yourdomain\.com/g, domain));
    setText('x-domain-url', `http://${domain}`);
    setText('x-ip-url', `http://${ip}`);
    setText('x-base-url', `http://${domain}`);

    // EA texts
    document.querySelectorAll('#ea-domain-url, #ea-base-url').forEach(el => {
        el.textContent = `https://${domain}`;
    });
}

function setText(id, val) {
    const el = document.getElementById(id);
    if (el) el.textContent = val;
}
function setCode(id, fn) {
    const el = document.getElementById(id);
    if (el) el.textContent = fn(el);
}

// ── Environment switcher ────────────────────────────────────────────
function switchEnv(env) {
    document.querySelectorAll('.env-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.env-panel').forEach(p => p.classList.remove('active'));

    const tab = document.querySelector(`.env-tab[onclick="switchEnv('${env}')"]`);
    if (tab) tab.classList.add('active');
    const panel = document.getElementById(`panel-${env}`);
    if (panel) panel.classList.add('active');

    updateAll();
}

// ── Copy buttons ────────────────────────────────────────────────────
function copyCode(btn) {
    const pre = btn.closest('.code-block').querySelector('pre');
    navigator.clipboard.writeText(pre.textContent).then(() => {
        btn.classList.add('copied');
        btn.innerHTML = '<i data-feather="check" style="width:11px;height:11px;"></i> Copied!';
        feather.replace();
        setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<i data-feather="copy" style="width:11px;height:11px;"></i> Copy';
            feather.replace();
        }, 2000);
    });
}

// Smooth scroll for nav links
document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
        const target = document.querySelector(a.getAttribute('href'));
        if (target) {
            e.preventDefault();
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });
});

// Init
updateAll();
</script>
</body>
</html>
